<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JQ Motors | Catálogo</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">

<style>
  body { margin:0; font-family:'Montserrat', sans-serif; background:#111; color:#eee; }
  h1 { text-align:center; margin:20px 0; }

  .container { display:flex; max-width:1200px; margin:0 auto; gap:20px; padding:0 10px; }

  /* Sidebar */
  .sidebar { width:220px; background:#222; padding:15px; border-radius:10px; max-height:80vh; overflow-y:auto; }
  .sidebar h2 { margin-top:0; font-size:1.2rem; text-align:center; }
  .sidebar ul { list-style:none; padding:0; }
  .sidebar li {
    margin:10px 0; cursor:pointer; padding:10px; border-radius:5px;
    text-align:left; background:#7B1E1E; font-weight:600;
    display:flex; align-items:center; gap:8px;
    transition: background 0.3s, transform 0.2s;
  }
  .sidebar li:hover, .sidebar li.active { background:#9B2A2A; transform:scale(1.05); }
  .cat-icon { width:24px; height:24px; }

  /* Modal */
  .modal {
    display:none; position:fixed; z-index:10000; left:0; top:0; width:100%; height:100%;
    background: rgba(0,0,0,0.8); justify-content:center; align-items:center;
  }
  .modal-content {
    background:#222; border-radius:10px; padding:20px; max-width:900px; width:90%; max-height:80vh;
    overflow-y:auto; display:grid; grid-template-columns: repeat(auto-fill,minmax(220px,1fr)); gap:20px;
  }

  /* Producto dentro del modal con efecto animado */
  .producto {
    background:#333; border-radius:8px; padding:10px; text-align:center;
    transition: transform .3s, box-shadow .3s;
    overflow:hidden;
    display:flex; flex-direction:column; justify-content:flex-start;
  }
  .producto:hover { transform:translateY(-5px) scale(1.03); box-shadow:0 0 25px rgba(0,0,0,0.8); }
  .producto img {
    width:100%; height:180px; object-fit:cover; border-radius:5px;
    transition: transform .3s;
  }
  .producto:hover img { transform: scale(1.1); }
  .producto .info {
    margin-top:10px;
    max-height:60px; overflow:hidden;
    transition: max-height .3s;
  }
  .producto:hover .info { max-height:200px; }

  .producto h3 { margin:5px 0; font-size:1.1rem; color:#fff; }
  .producto p { font-size:0.9rem; color:#ccc; }

  .cerrar { cursor:pointer; color:#fff; font-size:1.2rem; text-align:right; margin-bottom:10px; }

  @media(max-width:768px) {
    .container { flex-direction:column; }
    .sidebar { width:100%; display:flex; justify-content:center; }
    .sidebar ul { display:flex; gap:10px; flex-wrap:wrap; }
    .sidebar li { flex:1; justify-content:center; }
    .modal-content { grid-template-columns: repeat(auto-fill,minmax(160px,1fr)); }
  }
</style>
</head>
<body>

<h1>Catálogo de Refacciones</h1>

<div class="container">
  <div class="sidebar">
    <h2>Categorías</h2>
    <ul>
      <li data-cat="tornilleria"><img src="images/categorias/tornilleria.png" class="cat-icon">Tornillería</li>
      <li data-cat="balatas"><img src="images/categorias/balatas.png" class="cat-icon">Balatas</li>
      <li data-cat="retenes"><img src="images/categorias/retenes.png" class="cat-icon">Retenes</li>
      <li data-cat="filtro-aceite"><img src="images/categorias/filtro-aceite.png" class="cat-icon">Filtro Aceite</li>
      <li data-cat="filtro-aire"><img src="images/categorias/filtro-aire.png" class="cat-icon">Filtro Aire</li>
      <li data-cat="filtro-gasolina"><img src="images/categorias/filtro-gasolina.png" class="cat-icon">Filtro Gasolina</li>
      <li data-cat="juntas"><img src="images/categorias/juntas.png" class="cat-icon">Juntas</li>
      <li data-cat="manijas"><img src="images/categorias/manijas.png" class="cat-icon">Manijas</li>
    </ul>
  </div>
</div>

<!-- Modal -->
<div class="modal" id="modal-categoria">
  <div class="modal-content" id="modal-productos">
    <div class="cerrar" id="cerrar-modal">✖ Cerrar</div>
  </div>
</div>

<script>
const urlCatalogo = "catalogo/catalogo.json";
let catalogoData = {};

// Cargar JSON
fetch(urlCatalogo)
  .then(res => res.json())
  .then(data => { catalogoData = data; })
  .catch(err => console.warn("No se pudo cargar catalogo.json", err));

// Mostrar productos en modal
function mostrarModal(categoria) {
  const modal = document.getElementById("modal-categoria");
  const modalProductos = document.getElementById("modal-productos");

  // Limpiar anterior
  modalProductos.innerHTML = '<div class="cerrar" id="cerrar-modal">✖ Cerrar</div>';

  const productos = catalogoData[categoria] || [];
  productos.forEach(prod => {
    const rutaImagen = prod.imagen || "images/catalogo/placeholder.png";
    const card = document.createElement("div");
    card.className = "producto";
    card.innerHTML = `
      <img src="${rutaImagen}" alt="${prod.descripcion}" onerror="this.src='images/catalogo/placeholder.png'">
      <div class="info">
        <h3>${prod.codigo}</h3>
        <p>${prod.descripcion}</p>
      </div>
    `;
    modalProductos.appendChild(card);
  });

  modal.style.display = "flex";

  // Cerrar modal
  document.getElementById("cerrar-modal").onclick = () => { modal.style.display = "none"; };
  modal.onclick = (e) => { if(e.target === modal) modal.style.display="none"; };
}

// Botones categoría
const botones = document.querySelectorAll(".sidebar li");
botones.forEach(btn => {
  btn.addEventListener("click", () => {
    const cat = btn.dataset.cat;
    mostrarModal(cat);
  });
});
</script>

</body>
</html>
